{{ define "conundrums" }}
  <h3>conundrums:</h3>
  <ul>
    {{ range . }}
      <li>
        <span
          class="{{ if not .Verified }}apocryphal{{ end }}"
          hx-get="/conundrum?id={{ .Id }}"
          hx-target="main"
        >
          {{ .Text }}
        </span>
      </li>
    {{ end }}
  </ul>
{{ end }}

{{ define "conundrum" }}
  <h3>conundrum: {{ .Conundrum.Id }}</h3>
  <p>date........: {{ .Conundrum.Date }}</p>
  <p {{ if not .Conundrum.Verified }}class="apocryphal"{{ end }}>
    apocryphal..: {{ not .Conundrum.Verified }}
  </p>
  <p>comments....: {{ len .Comments }}</p>
  <p class="conundrum-text">conundrum...: {{ .Conundrum.Text }}</p>
  {{ template "comments" .Comments }}
{{ end }}

{{ define "comments" }}
  {{ if gt (len .) 0 }}
    <h3>comments:</h3>
    {{ range . }}
      <div class="comment-container">
        <span>{{ .Comment }}</span>
        <span class="comment-date">{{ .Date }}</span>
      </div>
    {{ end }}
  {{ end }}
{{ end }}

{{ define "upload-form" }}
  <h3>upload:</h3>
  <form hx-post="/upload" hx-target="#upload-form-result">
    <input required type="text" name="conundrum" placeholder="conundrum..." />
    <button type="submit">upload</button>
    {{ template "upload-form-result" }}
  </form>
{{ end }}

{{ define "upload-form-result" }}
  <span id="upload-form-result">{{ . }}</span>
{{ end }}
